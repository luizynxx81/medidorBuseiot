<div class="p-4 rounded-lg bg-slate-800 border border-slate-700 analysis-container">
  <div class="flex justify-between items-start mb-3">
    <div>
      <h4 class="text-base font-bold text-cyan-400">Análisis con IA</h4>
      <p class="text-xs text-slate-400">Este es un análisis autogenerado.</p>
    </div>
    <button (click)="onClose()" class="text-slate-500 hover:text-white transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>
  </div>

  <div class="space-y-4">
    <!-- Summary -->
    <div>
      <p class="text-sm font-semibold text-white">"{{ analysis().summary }}"</p>
    </div>

    <div class="grid grid-cols-3 gap-2 text-center">
      <!-- Sentiment -->
      <div class="p-2 rounded-md" [class]="sentimentInfo().bgColor">
        <div class="flex items-center justify-center gap-1.5">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" [class]="sentimentInfo().color" viewBox="0 0 20 20" fill="currentColor">
             <path fill-rule="evenodd" [attr.d]="sentimentInfo().icon" clip-rule="evenodd" />
          </svg>
          <span class="text-xs font-bold" [class]="sentimentInfo().color">{{ analysis().sentiment }}</span>
        </div>
      </div>
      <!-- Category -->
      <div class="p-2 rounded-md bg-slate-700/50">
        <span class="text-xs font-bold text-slate-300">{{ analysis().category }}</span>
      </div>
      <!-- Priority -->
      <div class="p-2 rounded-md" [class]="priorityInfo().bgColor">
        <span class="text-xs font-bold" [class]="priorityInfo().color">{{ analysis().priority }}</span>
      </div>
    </div>

    <!-- Image Analysis -->
    @if (analysis().imageAnalysis) {
      <div class="border-t border-slate-700 pt-3">
        <h5 class="flex items-center gap-2 text-xs font-bold text-slate-400 mb-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" /></svg>
          Análisis de Imagen
        </h5>
        <p class="text-sm text-slate-300 italic">"{{ analysis().imageAnalysis }}"</p>
      </div>
    }
  </div>
</div>